//hugov@runbox.com
!function(t,i){function s(t){for(var i=Array(t),s=0;s<t;++s){var r=0===s?0:s/(t-1);i[s]=(15+10*r-30*r*r+12*r*r*r)*r*r/7}return i}function r(t,i){for(var s=0,r=t.length;s<r;){var h=s+r>>>1;t[h]<i?s=h+1:r=h}return r}function h(t){this.length=t.length,this.probs=t,this.values=[],this.ranks=[],this.N=0,this.push=n,this._pushMode=e,this._right=a,this._left=l}function n(t){if(Array.isArray(t))for(var i=0;i<t.length;++i)this._pushMode(t[i],r(this.values,t[i]));else this._pushMode(t,r(this.values,t))}function e(t,i){var s=this.values,r=this.ranks;if(++this.N,this.N===this.length&&(this._pushMode=u),i===s.length)return s.push(t),void r.push(this.N);for(var h=i;h<r.length;++h)++r[h];0===i?(s.unshift(t),r.unshift(1)):(this.values.splice(i,0,t),r.splice(i,0,r[i-1]+1))}function u(t,i){var s=this.values,r=this.ranks;if(++this.N,i===s.length)return void this._left(r.length-1,t,this.N);for(var h=i;h<r.length;++h)++r[h];if(0===i)return void this._right(i,t,1);if(t!==s[i]){var n=this.N*this.probs[i-1],e=this.N*this.probs[i],u=r[i]-(r[i]-r[i-1])*(s[i]-t)/(s[i]-s[i-1]);u>e?this._right(i,t,u):u<n&&this._left(i-1,t,u)}}function a(t,i,s){var r=this.values,h=this.ranks;if(!(t>r.length-3)){var n=r[t],e=h[t];r[t]=i,h[t]=s,e+h[t+1]>2*this.N*this.probs[t+1]+2&&this._right(t+1,n,e)}}function l(t,i,s){var r=this.values,h=this.ranks;if(!(t<2)){var n=r[t],e=h[t];r[t]=i,h[t]=s,e+h[t-1]<2*this.N*this.probs[t-1]&&this._left(t-1,n,e)}}function o(t){var i=this.values,s=this.ranks;if(Array.isArray(t))return t.map(this.quantile,this);var h=(this.N+1)*t,n=r(s,h);if(n<1)return i[0];if(n===i.length)return i[i.length-1];var e=s[n],u=s[n-1];return i[n-1]+(i[n]-i[n-1])*(h-u)/(e-u)}module.exports=function(t){return new h(Array.isArray(t)?0===t[0]&&1===t[t.length-1]?t:t.reduce(function(t,i){return t.push(i),t},[0]).map(function(t,i,s){return t/s[s.length-1]}):s(t))},h.prototype={percentile:o,quantile:o,get min(){return this.values[0]},get max(){return this.values[this.values.length-1]}},i.miniQuant=t}({},function(){return this}());